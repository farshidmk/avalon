(this["webpackJsonpavalon-game"]=this["webpackJsonpavalon-game"]||[]).push([[0],{44:function(e,a,t){e.exports=t.p+"static/media/assassin.5f668b01.png"},45:function(e,a,t){e.exports=t.p+"static/media/loyalServant.e87d4aaf.png"},46:function(e,a,t){e.exports=t.p+"static/media/merlin.7f22cc65.png"},47:function(e,a,t){e.exports=t.p+"static/media/morgana.e58f6d8c.png"},48:function(e,a,t){e.exports=t.p+"static/media/percival.a23f95b6.png"},49:function(e,a,t){e.exports=t.p+"static/media/devil.df19dc75.png"},65:function(e,a,t){e.exports=t.p+"static/media/chooseSuccess.d996d6d8.png"},66:function(e,a,t){e.exports=t.p+"static/media/chooseDefeat.9df41631.png"},77:function(e,a,t){e.exports=t(87)},82:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(10),o=t.n(c),l=(t(82),t(9)),i=t(124),s=t(18),u=t(29),m=t(3),d=t(88),p=t(138),f=t(139),b=t(128),h=t(135),y=t(140),g=t(131),x=t(44),v=t.n(x),E=t(45),j=t.n(E),k=t(46),O=t.n(k),C=t(47),S=t.n(C),w=t(48),N=t.n(w),M=t(49),R=t.n(M),P=Object(i.a)((function(e){return{startSection:{border:"solid black 2px",borderRadius:"5px",boxShadow:"0px 0px 20px black",padding:e.spacing(1),margin:e.spacing(1),maxWidth:"800px",display:"flex",flexDirection:"column",overflow:"auto"},playersNo:{minWidth:"200px"},playersName:{margin:"10px 0px",display:"flex",flexWrap:"wrap",justifyContent:"center"},textField:{minWidth:"185px",margin:"5px"},charactersSection:{margin:"10px",border:"2px solid #a2a2a2",borderRadius:"10px",display:"flex",justifyContent:"center",flexWrap:"wrap"},badCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#aa303099",border:"1px solid red",color:"black",textAlign:"center",boxShadow:"0px 0px 10px red",borderRadius:"10px"},goodCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#2020aaaa",border:"1px solid blue",color:"white",textAlign:"center",boxShadow:"0px 0px 10px #0000ff",borderRadius:"10px"}}})),W={name:"loyal servant",isBad:!1},B=[W,{name:"Merlin",isBad:!1},{name:"Percival",isBad:!1},{name:"Morgana",isBad:!0},{name:"Assassin",isBad:!0},W,{name:"Mordred",isBad:!0},W,W,{name:"Oberon",isBad:!0}],I=function(e){var a=P(),t=Object(n.useState)(5),c=Object(l.a)(t,2),o=c[0],i=c[1],s=Object(n.useState)([]),m=Object(l.a)(s,2),x=m[0],v=m[1];return Object(n.useEffect)((function(){for(var e=[],a=0;a<o;a++)e[a]="player ".concat(a+1);v(e)}),[o]),r.a.createElement("div",{className:a.startSection},r.a.createElement(d.a,{variant:"h3",align:"center",className:"start-title"},"Avalon"),r.a.createElement(b.a,{className:a.playersNo},r.a.createElement(p.a,{id:"player-number"},"Player Number"),r.a.createElement(h.a,{labelId:"player-number",id:"player-number-select",value:o,onChange:function(e){return i(e.target.value)}},[5,6,7,8,9,10].map((function(e){return r.a.createElement(f.a,{key:e,value:e},e)})))),x.length>0?r.a.createElement("div",{className:a.playersName},Object(u.a)(Array(o).keys()).map((function(e,t){return r.a.createElement(y.a,{className:a.textField,key:e,id:"player".concat(e+1,"-name"),label:"player ".concat(e+1),variant:"outlined",value:x[t],onChange:function(e){!function(e,a){for(var t=[],n=0;n<o;n++)t[n]=n===a?e:x[n];v(t)}(e.target.value,t)}})}))):null,r.a.createElement("div",{className:a.charactersSection},r.a.createElement(A,{numberOfPlayers:o})),r.a.createElement(g.a,{className:"buttons",onClick:function(){return e.onStart(x,B.slice(0,o))},variant:"contained",color:"primary"},"Start"))},A=function(e){var a=e.numberOfPlayers;return r.a.createElement(r.a.Fragment,null,B.slice(0,a).map((function(e,a){return r.a.createElement(F,{key:a,name:e.name,isBad:e.isBad})})))},F=function(e){var a,t,n=e.name,c=e.isBad,o=P();switch(n){case"Merlin":t=O.a;break;case"Percival":t=N.a;break;case"Morgana":t=S.a;break;case"Assassin":t=v.a;break;case"loyal servant":t=j.a;break;default:t=R.a}return r.a.createElement("div",{className:Object(m.a)((a={},Object(s.a)(a,o.badCharacter,c),Object(s.a)(a,o.goodCharacter,!c),a),"card-character-in-start")},r.a.createElement("h5",null,n),r.a.createElement("img",{className:"character-in-start",alt:"".concat(n,"-icon"),src:t}))},D=t(132),G=Object(i.a)((function(e){return{badCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#aa303099",border:"3px solid #aa3030",color:"white",textAlign:"center",background:"radial-gradient(circle, rgb(255 143 143) 0%, rgba(0,0,0,1) 105%)"},goodCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#2020aaaa",border:"3px solid white",color:"black",textAlign:"center",background:"radial-gradient(circle, rgba(255,255,255,1) 0%, #b6c0ff 87%)"},playerCardRoot:{width:"500px",marginTop:"10px",display:"flex",padding:"5px",flexDirection:"column",alignItems:"center",border:"3px solid black",borderRadius:"15px 15px 15px 15px"},characterSection:{minWidth:"300px",minHeight:"150px",padding:"10px",borderRadius:"5px 5px 5px 5px"}}})),T=function(e){var a=Object(n.useState)([]),t=Object(l.a)(a,2),c=t[0],o=t[1],i=Object(n.useState)(0),s=Object(l.a)(i,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){for(var a=Object(u.a)(e.characters),t=Object(u.a)(e.players),n=[],r=[],c=[],l=0;l<e.characters.length;l++){var i=a[Math.floor(Math.random()*a.length)];n[l]={name:t[l],role:i};var s=a.indexOf(i);s>-1&&a.splice(s,1)}n.forEach((function(e){e.role.isBad&&r.push(e.name),"Merlin"!==e.role.name&&"Morgana"!==e.role.name||c.push(e.name)})),n.forEach((function(e){(e.role.isBad||"Merlin"===e.role.name)&&(e.knowingPlayers=r),"Percival"===e.role.name&&(e.merlinsFace=c)})),o(n)}),[e.characters,e.players]),Object(n.useEffect)((function(){return function(){return e.onPlayersGetRole(c)}})),r.a.createElement("div",null,c.length?r.a.createElement(V,{player:c[m],prevPlayer:m>0&&function(){return d((function(e){return e-1}))},nextPlayer:function(){m>=c.length-1?e.onGameStart():d((function(e){return e+1}))}}):r.a.createElement("h1",null,"Avalon"))},V=function(e){var a,t,c=e.player,o=e.nextPlayer,i=e.prevPlayer,u=G(),d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],b=p[1];switch(c.role.name){case"Merlin":t=O.a;break;case"Percival":t=N.a;break;case"Morgana":t=S.a;break;case"Assassin":t=v.a;break;case"loyal servant":t=j.a;break;default:t=R.a}return r.a.createElement("div",{className:u.playerCardRoot},r.a.createElement("h3",null,c.name),r.a.createElement("p",null,"click on button to ",f?" hide ":" show "," your character"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return b((function(e){return!e}))}},f?" hide ":" show "),r.a.createElement(D.a,{in:f},r.a.createElement("div",{className:Object(m.a)(u.characterSection,(a={},Object(s.a)(a,u.badCharacter,c.role.isBad),Object(s.a)(a,u.goodCharacter,!c.role.isBad),a))},r.a.createElement("div",{className:"header-show-character"},r.a.createElement("img",{className:"character-in-show-card",alt:"".concat(c.role.name,"-icon"),src:t}),r.a.createElement("h3",null,c.role.name)),c.role.isBad?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u0647\u0645 \u062a\u06cc\u0645\u06cc \u0647\u0627\u06cc \u0634\u0645\u0627 :"),"Morgana"===c.role.name&&r.a.createElement("p",null,"\u067e\u0631\u0633\u06cc\u0648\u0627\u0644 \u0628\u06cc\u0646 \u0634\u0645\u0627 \u0648 \u0645\u0631\u0644\u06cc\u0646 \u0628\u0627\u06cc\u062f \u0628\u0647 \u06cc\u06a9\u06cc \u0627\u0639\u062a\u0645\u0627\u062f \u06a9\u0646\u062f \u0648 \u0627\u0648 \u0631\u0627 \u0628\u0647 \u0686\u0634\u0645 \u0645\u0631\u0644\u06cc\u0646 \u0628\u0628\u06cc\u0646\u062f. \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f \u0627\u0648 \u0631\u0627 \u0645\u062a\u0642\u0627\u0639\u062f \u06a9\u0646\u06cc\u062f \u0628\u0647 \u0634\u0645\u0627 \u0627\u0639\u062a\u0645\u0627\u062f \u06a9\u0646\u062f."),c.knowingPlayers.map((function(e,a){return r.a.createElement("h5",{key:a,style:{color:"black"}},e)}))):"Percival"===c.role.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u06cc\u06a9\u06cc \u0627\u0632 \u062f\u0648 \u0628\u0627\u0632\u06cc\u06a9\u0646\u0627\u0646 \u0632\u06cc\u0631 \u0645\u0631\u0644\u06cc\u0646 \u0627\u0633\u062a \u0648 \u062f\u06cc\u06af\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u062f\u0631 \u0646\u0642\u0634 \u0645\u0631\u0644\u06cc\u0646 \u062c\u0627 \u0632\u062f\u0647 \u0627\u0633\u062a"),c.merlinsFace.map((function(e,a){return r.a.createElement("h5",{key:"merlin-face-".concat(a)},e)}))):"Merlin"===c.role.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u0634\u0645\u0627 \u062a\u06cc\u0645 \u0634\u06cc\u0637\u0627\u0646 \u0631\u0627 \u0645\u06cc\u0634\u0646\u0627\u0633\u06cc\u062f \u0648\u0644\u06cc \u0622\u0646\u0647\u0627 \u0646\u0628\u0627\u06cc\u062f \u0645\u062a\u0648\u062c\u0647 \u0646\u0642\u0634 \u0634\u0645\u0627 \u062f\u0631 \u0628\u0627\u0632\u06cc \u0634\u0648\u0646\u062f"),c.knowingPlayers.map((function(e,a){return r.a.createElement("h5",{key:a,style:{color:"red"}},e)}))):r.a.createElement("p",null,"\u0634\u0645\u0627 \u0627\u0632 \u06cc\u0627\u0631\u0627\u0646 \u0648\u0641\u0627\u062f\u0627\u0631 \u067e\u0627\u062f\u0634\u0627\u0647\u06cc \u0647\u0633\u062a\u06cc\u062f \u0648 \u062f\u0631 \u0645\u0627\u0645\u0648\u0631\u06cc\u062a \u0647\u0627 \u062d\u062a\u0645\u0627 \u0628\u0627\u06cc\u062f \u0645\u0648\u0641\u0642\u06cc\u062a \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"))),r.a.createElement(g.a,{onClick:function(){o()},style:{margin:"5px",marginTop:"15px"},fullWidth:!0,variant:"contained",disabled:f},"Next player"),r.a.createElement(g.a,{onClick:function(){i()},className:"prev-player",disabled:!i,variant:"contained"},"prev player"))},J=t(136),$=t(141),H=t(133),q=t(134),z=t(137),K=t(65),L=t.n(K),Q=t(66),U=t.n(Q),X=Object(i.a)((function(e){return{missionsRoot:{width:"100vw",height:"calc(100vh-16px)",display:"flex",justifyContent:"center",flexDirection:"column",padding:"16px"},boardRoot:{backgroundColor:"#grey",border:"2px solid black",borderRadius:"5px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:1},round:{borderRadius:"50%",border:"2px solid red",margin:"5px",height:"10vh",width:"10vh",display:"flex",alignItems:"center",justifyContent:"center"},missionFailed:{backgroundColor:"red"},missionSuccess:{backgroundColor:"blue"},currentMission:{cursor:"pointer",animationName:"$blinker",animationDuration:"2s",animationTimingFunction:"linear",animationIterationCount:"infinite"},modal:{display:"flex",alignItems:"center",flexDirection:"column"},modalRoot:{backgroundColor:e.palette.background.paper,border:"2px solid red",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"500px",minWidth:"300px",margin:"auto"},playersName:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},buttonsSection:{display:"flex",gap:"8px",margin:"5px 2px",justifyContent:"space-evenly"},"@keyframes blinker":{from:{backgroundColor:"red"},to:{backgroundColor:"blue"}}}})),Y=function(e){var a=e.playersWithRole,t=e.onRestartWithSamePlayers,c=e.onNewGame,o=X(),i=a.length,u=[[2,3,2,3,3],[2,3,4,3,4],[2,3,5,4,4],[3,4,4,5,5],[3,4,4,5,5],[3,4,4,5,5]],d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],b=p[1],h=Object(n.useState)(!1),y=Object(l.a)(h,2),x=y[0],v=y[1],E=Object(n.useState)((function(){var e=[];return u[i-5].forEach((function(a){e.push({players:a,status:"not-completed"})})),e})),j=Object(l.a)(E,2),k=j[0],O=j[1],C=Object(n.useState)(0),S=Object(l.a)(C,2),w=S[0],N=S[1],M=Object(n.useState)(k[w]),R=Object(l.a)(M,2),P=R[0],W=R[1],B=Object(n.useState)([]),I=Object(l.a)(B,2),A=I[0],F=I[1],D=Object(n.useState)(0),G=Object(l.a)(D,2),T=G[0],V=G[1],J=Object(n.useState)(!1),$=Object(l.a)(J,2),H=$[0],q=$[1],z=Object(n.useState)(""),K=Object(l.a)(z,2),L=K[0],Q=K[1];function U(e){var a=k;if(a[w]=e?{players:a[w].players,status:"failed"}:{players:a[w].players,status:"success"},W(k[w+1]),N((function(e){return e+1})),O(a),q(!1),F([]),w>=2){var t=0;k.forEach((function(e){"failed"===e.status&&(t+=1)})),t>=3?Q("bad"):w-(t+1)>=3&&Q("good")}}return x?r.a.createElement("div",{className:"show-all-players-root"},r.a.createElement("h3",null,"players:"),null===a||void 0===a?void 0:a.map((function(e){return r.a.createElement("p",{className:e.role.isBad?"show-bad-player-role":"show-good-player-role",key:e.name},e.name," is ",e.role.name)})),r.a.createElement(g.a,{variant:"outlined",color:"primary",onClick:t},"Restart With same players"),r.a.createElement(g.a,{variant:"outlined",color:"primary",onClick:c},"start New Game")):L?r.a.createElement("div",null,r.a.createElement("h1",null,"Winner is ",L," guys"),r.a.createElement(g.a,{onClick:function(){return v(!0)},color:"secondary",variant:"outlined"},"Show player's role")):H?r.a.createElement(_,{playersInMission:A,onMissionCompleted:function(e){return U(e)}}):r.a.createElement("div",{className:o.missionsRoot},r.a.createElement("h3",null,"ignored times: ",T),r.a.createElement("p",null,"if 5 times ignore the kings, mission will be failed!"),r.a.createElement("div",{className:o.boardRoot},k&&k.length>0&&k.map((function(e,a){var t;return r.a.createElement("div",{key:"mission-".concat(a),className:Object(m.a)(o.round,(t={},Object(s.a)(t,o.missionFailed,"failed"===e.status),Object(s.a)(t,o.missionSuccess,"success"===e.status),Object(s.a)(t,o.currentMission,a===w),t)),onClick:function(){a===w&&b(!0)}},e.players)})),r.a.createElement(Z,{open:f,handleClose:function(){return b(!1)},playersNoInMission:P.players,playersWithRole:a,playersInMission:A,setPlayersInMission:function(e){return F(e)},onVotingResult:function(e){e?(V(0),q(!0)):T<5?(V((function(e){return e+1})),q(!1)):(V(0),U(!1),q(!1))}})))},Z=function(e){var a=X(),t=Object(n.useState)(e.playersNoInMission),c=Object(l.a)(t,2),o=c[0],i=c[1],s=Object(n.useState)(!1),m=Object(l.a)(s,2),d=m[0],p=m[1];return r.a.createElement(J.a,{className:a.modal,open:e.open,disableBackdropClick:!0,closeAfterTransition:!0,BackdropComponent:$.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:a.modalRoot},o>0?r.a.createElement("h5",null,"Choose ".concat(o," Players")):r.a.createElement("h5",null,"click start to vote"),r.a.createElement(H.a,{className:a.playersName},e.playersWithRole.map((function(a,t){return r.a.createElement(q.a,{key:"form-control-".concat(t),control:r.a.createElement(z.a,{checked:e.playersInMission.includes(a),onChange:function(){e.playersInMission.includes(a)?(e.setPlayersInMission((function(e){return e.filter((function(e){return e!==a}))})),i((function(e){return e+1}))):o>0&&(e.setPlayersInMission((function(e){return[].concat(Object(u.a)(e),[a])})),i((function(e){return e-1})))},name:a.name}),label:a.name})}))),r.a.createElement("div",{className:a.buttonsSection},r.a.createElement(g.a,{variant:"contained",color:"primary",disabled:o>0||d,onClick:function(){return p(!0)}},"start"),r.a.createElement(g.a,{variant:"contained",color:"primary",disabled:d,onClick:e.handleClose},"exit")),r.a.createElement(D.a,{in:d},r.a.createElement("div",{className:a.buttonsSection},r.a.createElement(g.a,{variant:"outlined",color:"primary",onClick:function(){e.handleClose(),e.onVotingResult(!0),p(!1)}},"Approve"),r.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:function(){e.handleClose(),e.onVotingResult(!1),e.setPlayersInMission([]),p(!1),i(e.playersNoInMission)}},"Deny")))))},_=function(e){var a=e.playersInMission,t=e.onMissionCompleted,c=Object(n.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(0),m=Object(l.a)(u,2),d=m[0],p=m[1];function f(e){p((function(e){return e+1})),"failed"===e&&s(!0),d>=a.length-1&&t(i)}return r.a.createElement("div",{className:"show-mission-choice"},r.a.createElement("h2",null,a[d].name),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h4",null,"\u0645\u0648\u0641\u0642\u06cc\u062a"),r.a.createElement("img",{src:L.a,alt:"success",onClick:function(){return f("success")}})),r.a.createElement("div",null,r.a.createElement("h4",null,"\u0634\u06a9\u0633\u062a"),r.a.createElement("img",{src:U.a,alt:"defeat",onClick:function(){a[d].role.isBad?f("failed"):window.alert("\u0634\u0645\u0627 \u0646\u0628\u0627\u06cc\u062f \u0628\u0647 \u0645\u0627\u0645\u0648\u0631\u06cc\u062a \u0634\u06a9\u0633\u062a \u0628\u062f\u0647\u06cc\u062f")}}))))},ee=(t(86),Object(i.a)((function(e){return{root:{height:"100vh",width:"100%",display:"flex",justifyContent:"center",overflow:"auto"}}}))),ae=function(){var e=ee(),a=Object(n.useState)(0),t=Object(l.a)(a,2),c=t[0],o=t[1],i=Object(n.useState)([]),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),p=Object(l.a)(d,2),f=p[0],b=p[1],h=Object(n.useState)([]),y=Object(l.a)(h,2),g=y[0],x=y[1];return r.a.createElement("div",{className:e.root},0===c?r.a.createElement(I,{onStart:function(e,a){m(e),b(a),o(1)}}):1===c?r.a.createElement(T,{players:u,characters:f,onGameStart:function(){return o(2)},onPlayersGetRole:function(e){return x(e)}}):2===c?r.a.createElement(Y,{playersWithRole:g,onNewGame:function(){o(0),m([]),b([]),x([])},onRestartWithSamePlayers:function(){o(1),x([])}}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[77,1,2]]]);
//# sourceMappingURL=main.f9f01210.chunk.js.map