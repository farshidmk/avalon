(this["webpackJsonpavalon-game"]=this["webpackJsonpavalon-game"]||[]).push([[0],{69:function(e,a,t){e.exports=t(78)},74:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),o=t.n(l),c=(t(74),t(9)),i=t(118),s=t(18),u=t(30),m=t(3),d=t(79),p=t(134),b=t(136),f=t(121),h=t(130),y=t(133),g=t(124),x=Object(i.a)((function(e){return{startSection:{width:"100%",height:"100%",padding:"5px",maxWidth:"800px",backgroundColor:"antiquewhite",display:"flex",flexDirection:"column"},playersNo:{minWidth:"200px"},playersName:{margin:"10px 0px",display:"flex",flexWrap:"wrap",justifyContent:"center"},textField:{minWidth:"185px",margin:"5px"},charactersSection:{margin:"10px",border:"2px solid #a2a2a2",borderRadius:"10px",display:"flex",justifyContent:"center",flexWrap:"wrap"},badCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#aa303099",border:"1px solid red",color:"black",textAlign:"center"},goodCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#2020aaaa",border:"1px solid blue",color:"white",textAlign:"center"}}})),E={name:"loyal servant",isBad:!1},j=[E,{name:"Merlin",isBad:!1},{name:"Percival",isBad:!1},{name:"Morgana",isBad:!0},{name:"Assassin",isBad:!0},E,{name:"Mordred",isBad:!0},E,E,{name:"Oberon",isBad:!0}],v=function(e){var a=x(),t=Object(n.useState)(5),l=Object(c.a)(t,2),o=l[0],i=l[1],s=Object(n.useState)([]),m=Object(c.a)(s,2),E=m[0],v=m[1];return Object(n.useEffect)((function(){for(var e=[],a=0;a<o;a++)E[a]?e[a]=E[a]:e[a]="p".concat(a+1);v(e)}),[o]),r.a.createElement("div",{className:a.startSection},r.a.createElement(d.a,{variant:"h3",align:"center"},"Avalon"),r.a.createElement(f.a,{className:a.playersNo},r.a.createElement(p.a,{id:"player-number"},"Player Number"),r.a.createElement(h.a,{labelId:"player-number",id:"player-number-select",value:o,onChange:function(e){return i(e.target.value)}},[5,6,7,8,9,10].map((function(e){return r.a.createElement(b.a,{key:e,value:e},e)})))),E.length>0?r.a.createElement("div",{className:a.playersName},Object(u.a)(Array(o).keys()).map((function(e,t){return r.a.createElement(y.a,{className:a.textField,key:e,id:"player".concat(e+1,"-name"),label:"player ".concat(e+1),variant:"outlined",value:E[t],onChange:function(e){!function(e,a){for(var t=[],n=0;n<o;n++)t[n]=n===a?e:E[n];v(t)}(e.target.value,t)}})}))):null,r.a.createElement("div",{className:a.charactersSection},r.a.createElement(O,{playersNo:o})),r.a.createElement(g.a,{onClick:function(){return e.onStart(E,j.slice(0,o))},variant:"contained",color:"primary"},"Start"))},O=function(e){return r.a.createElement(r.a.Fragment,null,j.slice(0,e.playersNo).map((function(e,a){return r.a.createElement(k,{key:a,name:e.name,isBad:e.isBad})})))},k=function(e){var a,t=x();return r.a.createElement("div",{className:Object(m.a)((a={},Object(s.a)(a,t.badCharacter,e.isBad),Object(s.a)(a,t.goodCharacter,!e.isBad),a))},r.a.createElement("h5",null,e.name))},C=t(125),S=Object(i.a)((function(e){return{badCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#aa303099",border:"3px solid #aa3030",color:"white",textAlign:"center",background:"radial-gradient(circle, rgba(255,0,0,1) 0%, rgba(0,0,0,1) 87%)"},goodCharacter:{minWidth:"100px",margin:"5px",backgroundColor:"#2020aaaa",border:"3px solid white",color:"black",textAlign:"center",background:"radial-gradient(circle, rgb(217 222 255) 0%, rgba(0,32,247,1) 87%)"},playerCardRoot:{width:"500px",marginTop:"10px",display:"flex",padding:"5px",flexDirection:"column",alignItems:"center",border:"3px solid black",borderRadius:"15px 15px 15px 15px",backgroundColor:"#5b5b5b"},characterSection:{minWidth:"300px",minHeight:"150px",padding:"10px",borderRadius:"5px 5px 5px 5px"}}})),M=function(e){var a=Object(n.useState)([]),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)(0),s=Object(c.a)(i,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){for(var a=Object(u.a)(e.characters),t=Object(u.a)(e.players),n=[],r=[],l=[],c=0;c<e.characters.length;c++){var i=a[Math.floor(Math.random()*a.length)];n[c]={name:t[c],role:i};var s=a.indexOf(i);s>-1&&a.splice(s,1)}n.forEach((function(e){e.role.isBad&&r.push(e.name),"Merlin"!==e.role.name&&"Morgana"!==e.role.name||l.push(e.name)})),n.forEach((function(e){(e.role.isBad||"Merlin"===e.role.name)&&(e.knowingPlayers=r),"Percival"===e.role.name&&(e.merlinsFace=l)})),o(n)}),[e.characters,e.players]),Object(n.useEffect)((function(){return function(){return e.onPlayersGetRole(l)}})),r.a.createElement("div",null,l.length?r.a.createElement(N,{player:l[m],nextPlayer:function(){m>=l.length-1?e.onGameStart():d((function(e){return e+1}))}}):r.a.createElement("h1",null,"Avalon"))},N=function(e){var a,t=S(),l=Object(n.useState)(!1),o=Object(c.a)(l,2),i=o[0],u=o[1];return r.a.createElement("div",{className:t.playerCardRoot},r.a.createElement("h3",null,e.player.name),r.a.createElement("p",null,"\u0631\u0648\u06cc \u062f\u06a9\u0645\u0647 \u0632\u06cc\u0631 \u0628\u0632\u0646\u06cc\u062f \u062a\u0627 \u0634\u062e\u0635\u06cc\u062a \u0634\u0645\u0627 \u0631\u0627",i?" \u0645\u062e\u0641\u06cc \u06a9\u0646\u062f":"\u0646\u0634\u0627\u0646 \u062f\u0647\u062f"," "),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return u((function(e){return!e}))},style:{marginButton:"15px"}},i?" \u0645\u062e\u0641\u06cc \u06a9\u0631\u062f\u0646 ":" \u0646\u0645\u0627\u06cc\u0634 \u062f\u0627\u062f\u0646 "),r.a.createElement(C.a,{in:i},r.a.createElement("div",{className:Object(m.a)(t.characterSection,(a={},Object(s.a)(a,t.badCharacter,e.player.role.isBad),Object(s.a)(a,t.goodCharacter,!e.player.role.isBad),a))},r.a.createElement("h3",null,e.player.role.name),e.player.role.isBad?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u0647\u0645 \u062a\u06cc\u0645\u06cc \u0647\u0627\u06cc \u0634\u0645\u0627 :"),e.player.knowingPlayers.map((function(e,a){return r.a.createElement("h5",{key:a,style:{color:"black"}},e)}))):"Percival"===e.player.role.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u06cc\u06a9\u06cc \u0627\u0632 \u062f\u0648 \u0628\u0627\u0632\u06cc\u06a9\u0646\u0627\u0646 \u0632\u06cc\u0631 \u0645\u0631\u0644\u06cc\u0646 \u0627\u0633\u062a \u0648 \u062f\u06cc\u06af\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u062f\u0631 \u0646\u0642\u0634 \u0645\u0631\u0644\u06cc\u0646 \u062c\u0627 \u0632\u062f\u0647 \u0627\u0633\u062a"),e.player.merlinsFace.map((function(e,a){return r.a.createElement("h5",{key:"merlin-face-".concat(a)},e)}))):"Merlin"===e.player.role.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u0634\u0645\u0627 \u062a\u06cc\u0645 \u0634\u06cc\u0637\u0627\u0646 \u0631\u0627 \u0645\u06cc\u0634\u0646\u0627\u0633\u06cc\u062f \u0648\u0644\u06cc \u0622\u0646\u0647\u0627 \u0646\u0628\u0627\u06cc\u062f \u0645\u062a\u0648\u062c\u0647 \u0646\u0642\u0634 \u0634\u0645\u0627 \u062f\u0631 \u0628\u0627\u0632\u06cc \u0634\u0648\u0646\u062f"),e.player.knowingPlayers.map((function(e,a){return r.a.createElement("h3",{key:a,style:{color:"red"}},e)}))):r.a.createElement("p",null,"\u0634\u0645\u0627 \u0627\u0632 \u06cc\u0627\u0631\u0627\u0646 \u0648\u0641\u0627\u062f\u0627\u0631 \u067e\u0627\u062f\u0634\u0627\u0647\u06cc \u0647\u0633\u062a\u06cc\u062f \u0648 \u062f\u0631 \u0645\u0627\u0645\u0648\u0631\u06cc\u062a \u0647\u0627 \u062d\u062a\u0645\u0627 \u0628\u0627\u06cc\u062f \u0645\u0648\u0641\u0642\u06cc\u062a \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"))),r.a.createElement(g.a,{onClick:function(){e.nextPlayer()},style:{margin:"5px",marginTop:"55px"},fullWidth:!0,variant:"contained",disabled:i},"\u0628\u0627\u0632\u06cc\u06a9\u0646 \u0628\u0639\u062f\u06cc"))},w=t(132),B=t(135),I=t(128),R=t(129),W=t(131),P=t(127),F=t(126),A=Object(i.a)((function(e){return{missionsRoot:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center"},boardRoot:{width:"85%",height:"90%",backgroundColor:"#grey",border:"2px solid black",borderRadius:"5px",display:"flex",justifyContent:"center",alignItems:"center"},round:{borderRadius:"50%",border:"2px solid red",margin:"5px",height:"10vh",width:"10vh",display:"flex",alignItems:"center",justifyContent:"center"},missionFailed:{backgroundColor:"red"},missionSuccess:{backgroundColor:"blue"},currentMission:{cursor:"pointer",animationName:"$blinker",animationDuration:"2s",animationTimingFunction:"linear",animationIterationCount:"infinite"},modal:{display:"flex",alignItems:"center",flexDirection:"column"},modalRoot:{backgroundColor:e.palette.background.paper,border:"2px solid red",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"500px",minWidth:"300px",margin:"auto"},playersName:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},buttonsSection:{display:"flex",margin:"5px 2px",justifyContent:"space-evenly"},"@keyframes blinker":{from:{backgroundColor:"red"},to:{backgroundColor:"blue"}}}})),D=function(e){var a=A(),t=Object(F.a)("(min-width:600px)"),l=e.playersWithRole,o=l.length,i=[[2,3,2,3,3],[2,3,4,3,4],[2,3,3,4,4],[3,4,4,5,5],[3,4,4,5,5],[3,4,4,5,5]],u=Object(n.useState)(!1),d=Object(c.a)(u,2),p=d[0],b=d[1],f=Object(n.useState)(l&&l[Math.floor(Math.random()*Math.floor(o))].name),h=Object(c.a)(f,2),y=h[0],g=h[1],x=Object(n.useState)((function(){var e=[];return i[o-5].forEach((function(a){e.push({players:a,status:"not-completed"})})),e})),E=Object(c.a)(x,2),j=E[0],v=E[1],O=Object(n.useState)(0),k=Object(c.a)(O,2),C=k[0],S=k[1],M=Object(n.useState)(j[C]),N=Object(c.a)(M,2),w=N[0],B=N[1],I=Object(n.useState)([]),R=Object(c.a)(I,2),W=R[0],D=R[1],V=Object(n.useState)(0),J=Object(c.a)(V,2),$=J[0],q=J[1],H=Object(n.useState)(!1),z=Object(c.a)(H,2),K=z[0],L=z[1],Q=Object(n.useState)(""),U=Object(c.a)(Q,2),X=U[0],Y=U[1];function Z(e){var a=j;if(a[C]=e?{players:a[C].players,status:"failed"}:{players:a[C].players,status:"success"},B(j[C+1]),S((function(e){return e+1})),v(a),L(!1),D([]),C>=2){var t=0;j.forEach((function(e){"failed"===e.status&&(t+=1)})),t>=3?Y("bad"):C-(t+1)>=3&&Y("good")}}return X?r.a.createElement("div",null,r.a.createElement("h1",null,"\u0628\u0631\u0646\u062f\u0647 \u0647\u0627: ",X," ")):K?r.a.createElement(T,{playersInMission:W,onMissionCompleted:function(e){return Z(e)}}):r.a.createElement(P.a,{container:!0,spacing:1,className:a.missionsRoot},r.a.createElement(P.a,{item:!0,xs:12,md:4},r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{align:"center"},"\u062a\u0639\u062f\u0627\u062f \u062f\u0641\u0639\u0627\u062a \u0631\u062f \u0634\u062f\u0647 \u062a\u0648\u0633\u0637 \u0634\u0647\u0631\u0648\u0646\u062f\u0627\u0646: ",$),r.a.createElement("p",{align:"center"},"\u0627\u06af\u0631 \u06f5\u0628\u0627\u0631 \u062f\u0631 \u06cc\u06a9 \u062f\u0648\u0631 \u0631\u0627\u06cc \u06af\u06cc\u0631\u06cc \u0628\u0647 \u0646\u062a\u06cc\u062c\u0647 \u0646\u0631\u0633\u062f \u0645\u0627\u0645\u0648\u0631\u06cc\u062a \u0634\u06a9\u0633\u062a \u0645\u06cc\u062e\u0648\u0631\u062f"),r.a.createElement("h3",{align:"center"},y," :\u067e\u0627\u062f\u0634\u0627\u0647 "),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:t?"row":"column"}},j&&j.length>0&&j.map((function(e,t){var n;return r.a.createElement("div",{key:"mission-".concat(t),className:Object(m.a)(a.round,(n={},Object(s.a)(n,a.missionFailed,"failed"===e.status),Object(s.a)(n,a.missionSuccess,"success"===e.status),Object(s.a)(n,a.currentMission,t===C),n)),onClick:function(){t===C&&b(!0)}},e.players)}))))),r.a.createElement(P.a,{item:!0},r.a.createElement(G,{open:p,handleClose:function(){return b(!1)},playersNoInMission:w.players,playersWithRole:l,playersInMission:W,setPlayersInMission:function(e){return D(e)},onVotingResult:function(e){e?(q(0),L(!0)):$<5?(q((function(e){return e+1})),L(!1)):(q(0),Z(!1),L(!1)),g(l[Math.floor(Math.random()*Math.floor(o))].name)}})))},G=function(e){var a=A(),t=Object(n.useState)(e.playersNoInMission),l=Object(c.a)(t,2),o=l[0],i=l[1],s=Object(n.useState)(!1),m=Object(c.a)(s,2),d=m[0],p=m[1];return r.a.createElement(w.a,{className:a.modal,open:e.open,disableBackdropClick:!0,closeAfterTransition:!0,BackdropComponent:B.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:a.modalRoot},o>0?r.a.createElement("h5",null,"Choose ".concat(o," Players")):r.a.createElement("h5",null,"click start to vote"),r.a.createElement(I.a,{className:a.playersName},e.playersWithRole.map((function(a,t){return r.a.createElement(R.a,{key:"form-control-".concat(t),control:r.a.createElement(W.a,{checked:e.playersInMission.includes(a),onChange:function(){e.playersInMission.includes(a)?(e.setPlayersInMission((function(e){return e.filter((function(e){return e!==a}))})),i((function(e){return e+1}))):o>0&&(e.setPlayersInMission((function(e){return[].concat(Object(u.a)(e),[a])})),i((function(e){return e-1})))},name:a.name}),label:a.name})}))),r.a.createElement("div",{className:a.buttonsSection},r.a.createElement(g.a,{variant:"contained",color:"primary",disabled:o>0||d,onClick:function(){return p(!0)}},"\u0634\u0631\u0648\u0639"),r.a.createElement(g.a,{variant:"contained",color:"primary",disabled:d,onClick:e.handleClose},"\u0628\u0633\u062a\u0646")),r.a.createElement(C.a,{in:d},r.a.createElement("div",{className:a.buttonsSection},r.a.createElement(g.a,{variant:"outlined",color:"primary",onClick:function(){e.handleClose(),e.onVotingResult(!0),p(!1)}},"\u0627\u0641\u0631\u0627\u062f \u0627\u0646\u062a\u062e\u0627\u0628\u06cc \u0642\u0628\u0648\u0644 \u0634\u062f\u0646\u062f"),r.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:function(){e.handleClose(),e.onVotingResult(!1),e.setPlayersInMission([]),p(!1),i(e.playersNoInMission)}},"\u0627\u0641\u0631\u0627\u062f \u0627\u0646\u062a\u062e\u0627\u0628\u06cc \u0631\u062f \u0634\u062f\u0646\u062f")))))},T=function(e){var a=e.playersInMission,t=e.onMissionCompleted,l=Object(n.useState)(!1),o=Object(c.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(0),m=Object(c.a)(u,2),d=m[0],p=m[1];function b(e){p((function(e){return e+1})),"failed"===e&&s(!0),d>=a.length-1&&t(i)}return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,a[d].name),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return b("success")}},"\u0645\u0648\u0641\u0642\u06cc\u062a"),r.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:function(){return b("failed")}},"\u0634\u06a9\u0633\u062a")))},V=Object(i.a)((function(e){return{root:{height:"100vh",width:"100%",display:"flex",justifyContent:"center",overflow:"auto"}}})),J=function(){var e=V(),a=Object(n.useState)(0),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),b=p[0],f=p[1],h=Object(n.useState)([]),y=Object(c.a)(h,2),g=y[0],x=y[1];return r.a.createElement("div",{className:e.root},0===l?r.a.createElement(v,{onStart:function(e,a){m(e),f(a),o(1)}}):1===l?r.a.createElement(M,{players:u,characters:b,onGameStart:function(){return o(2)},onPlayersGetRole:function(e){return x(e)}}):2===l?r.a.createElement(D,{playersWithRole:g}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.3991ae0a.chunk.js.map